!function(){function t(t,n,o,e,r){!function(t,n={}){Object.assign(t.style,n)}(t,{width:n+"px",height:o+"px"}),t.width=e,t.height=r}function n(t){return t*Math.PI/180}function o(t,n){n.push(t)}function e(t,n,o,e){return o===e?Math.random()*t*1.1+.1*t:Math.random()*t/2+t/2}function r(t,n){return n<=1?t:Math.random()*(t/n)+t}function c(t,o,e,r,c,h,i){const a=o,s=e;t.save(),i&&(t.lineWidth=1,t.fillStyle="brown",t.strokeStyle="brown",t.lineJoin="round"),t.translate(a,s),t.rotate(n(h)),t.fillRect(r/-2,e-s,r,c),t.rect(r/-2,e-s,r,c),i&&t.stroke(),t.restore()}const h=1600,i={w:120,h:150,get x(){return 800-this.w/2},y:0};const a=(t,n)=>t||n;function s(t,e,r,c,h,...i){i.push(h);const{newX:a,newY:s,newDeg:f,xRandom:d,yRandom:l}=function(t,o,e,r,c,h){const i=4*Math.random()+2;return{newX:o-Math.sin(n(r))*h,newY:e+Math.cos(n(Math.abs(r)))*h,newDeg:"right"===t?r-c:r+c,xRandom:o-Math.sin(n(r))*h/i,yRandom:e+Math.cos(n(Math.abs(r)))*h/i}}(e,...i);o([e,a,s,f],t[0]),r>2&&c>5&&o([e,d,l,f*u(),c,h],t[1])}function u(){const t=Math.ceil(4*Math.random());return Math.random<.5?-t:t}function f(t,n){if(n.count>0){n.count--;const{coords:o,h:h,w:i,degStep:a,extra:u}=n;!function(t,n,o){t.left.coords=n,t.right.coords=o}(n,function(t,n,o,h,i,a,u){const f=[];return t.beginPath(),n.forEach((([n,d,l,g])=>{"right"===n&&(g+=2*i);let w=r(g,a),M=e(h,0,a,10);c(t,d,l,o,M,w,!0),s([f,u],"right",a,o,M,d,l,w,i)})),t.closePath(),f}(t,o,i,h,a,n.count,u),function(t,n,o,h,i,a,u){const f=[];return t.beginPath(),n.forEach((([n,d,l,g])=>{"main"===n&&0!==g&&(g=-g),"left"===n&&(g-=2*i);let w=r(g,a),M=e(h,0,a,10);c(t,d,l,o,M,w,!0),s([f,u],"right",a,o,M,d,l,w,i)})),t.closePath(),f}(t,o,i,h,a,n.count,u)),function(t){t.w>1&&(t.w=t.w/2);t.h>20&&(t.h=t.h/1.5)}(n),f(t,n)}}const{w:d,h:l,degStep:g}={w:20,h:20,degStep:30};function w(t,n){n.coords.forEach((([o,e,r,h])=>{"left"===o?h-=n.degStep:h+=n.degStep,t.beginPath(),t.fillStyle=`hsl(${Math.floor(20*Math.random()+140)}, ${Math.floor(30*Math.random()+40)}%, ${Math.floor(20*Math.random()+40)}%)`,function(t,n,o,e,r,h,i,a){e=Math.random()*e+5,r=Math.random()*r+10;for(let s=0;s<a;s++)0===s?c(t,n,o,e,r,h+i*s):(c(t,n,o,e,r,h+i*s),c(t,n,o,e,r,h-i*s))}(t,e,r,d,l,h,g,7),t.closePath()}))}function M(...t){const{x:n,y:o,w:e,h:r,deg:c,degStep:h,count:i,countDef:s,side:u}=function(t,n,o,e,r,c,h,i,s){return t=a(t,800),n=a(n,0),s=a(s,"main"),r=a(r,0),h=a(function(t,n){if("auto"===n){let n=t,o=1;for(;n>1;)n/=2,o++;return o}}(o,i),10),{x:t,y:n,w:o=a(o,30),h:e=a(e,400),deg:r,degStep:c=a(c,20),count:h,side:s}}(...t);return{left:{coords:[[u,n,o,c]]},right:{coords:[[u,n,o,c]]},extra:[],w:e,h:r,degStep:h,count:i,get coords(){return"main"===this.left.coords[0][0]?[["main",...this.left.coords[0].slice(1)]]:[...this.left.coords,...this.right.coords]}}}function m(t,n){const o=[n];!function(t,{x:n,y:o,w:e,h:r}){t.beginPath(),t.fillStyle="brown",t.strokeStyle="brown",t.lineJoin="round",t.lineWidth=10,t.fillRect(n,o,e,r),t.rect(n,o,e,r),t.stroke(),t.closePath()}(t,i),f(t,n),function(t,n,o){n.extra.forEach((([n,e,r,c,h,i])=>{const a=M(e,r,h/=2,i/=1.5,c,!1,!1,"auto",n);o.push(a),f(t,a)}))}(t,n,o),function(t,n){n.forEach((n=>{w(t,n)}))}(t,o)}var S;t(S=document.querySelector("canvas"),800,600,h,1200),m(S.getContext("2d"),M(!1,i.h))}();